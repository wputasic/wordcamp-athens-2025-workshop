{
  "$schema": "https://playground.wordpress.net/blueprint-schema.json",
  "landingPage": "/wp-admin/edit.php?post_type=wc_note",
  "preferredVersions": {
    "php": "8.0",
    "wp": "latest"
  },
  "steps": [
    {
      "step": "login",
      "username": "admin",
      "password": "password"
    },
    {
      "step": "setSiteOptions",
      "options": {
        "WPLANG": "el_GR",
        "locale": "el_GR"
      }
    },
    {
      "step": "runPHP",
      "code": "<?php\nrequire_once '/wordpress/wp-load.php';\n// Set user locale to Greek\n$user_id = 1; // admin user\nupdate_user_meta($user_id, 'locale', 'el_GR');\n// Also update the site locale in wp_options\nupdate_option('WPLANG', 'el_GR');\nupdate_option('locale', 'el_GR');\n"
    },
    {
      "step": "runPHP",
      "code": "<?php\n$plugin_dir = '/wordpress/wp-content/plugins/wc-notes';\n$languages_dir = $plugin_dir . '/languages';\nif (!file_exists($plugin_dir)) {\n    mkdir($plugin_dir, 0755, true);\n}\nif (!file_exists($languages_dir)) {\n    mkdir($languages_dir, 0755, true);\n}\n"
    },
    {
      "step": "writeFile",
      "path": "/wordpress/wp-content/plugins/wc-notes/plugin.php",
      "data": "<?php\n/**\n * Plugin Name: WordCamp Notes\n * Plugin URI: https://github.com/yourusername/wordcamp-athens-2025-workshop\n * Description: Take and organize notes during WordCamp sessions. A practical plugin for conference attendees.\n * Version: 1.0.0\n * Author: WordCamp Athens 2025 Workshop\n * Author URI: https://athens.wordcamp.org/2025\n * License: GPL-2.0+\n * License URI: http://www.gnu.org/licenses/gpl-2.0.txt\n * Text Domain: wc-notes\n * Domain Path: /languages\n */\n\n// Exit if accessed directly\nif (!defined('ABSPATH')) {\n    exit;\n}\n\n/**\n * Load plugin text domain for translations\n */\nfunction wc_notes_load_textdomain() {\n    load_plugin_textdomain(\n        'wc-notes',\n        false,\n        dirname(plugin_basename(__FILE__)) . '/languages'\n    );\n}\nadd_action('plugins_loaded', 'wc_notes_load_textdomain');\n\n/**\n * Register WordCamp Notes Custom Post Type\n */\nfunction wc_notes_register_post_type() {\n    $labels = array(\n        'name'                  => _x('WordCamp Notes', 'Post type general name', 'wc-notes'),\n        'singular_name'         => _x('Note', 'Post type singular name', 'wc-notes'),\n        'menu_name'             => _x('WordCamp Notes', 'Admin Menu text', 'wc-notes'),\n        'name_admin_bar'        => _x('Note', 'Add New on Toolbar', 'wc-notes'),\n        'add_new'               => __('Add New', 'wc-notes'),\n        'add_new_item'          => __('Add New Note', 'wc-notes'),\n        'new_item'              => __('New Note', 'wc-notes'),\n        'edit_item'             => __('Edit Note', 'wc-notes'),\n        'view_item'             => __('View Note', 'wc-notes'),\n        'all_items'             => __('All Notes', 'wc-notes'),\n        'search_items'          => __('Search Notes', 'wc-notes'),\n        'not_found'             => __('No notes found.', 'wc-notes'),\n        'not_found_in_trash'    => __('No notes found in Trash.', 'wc-notes'),\n    );\n\n    $args = array(\n        'labels'             => $labels,\n        'public'             => true,\n        'publicly_queryable' => true,\n        'show_ui'            => true,\n        'show_in_menu'       => true,\n        'query_var'          => true,\n        'rewrite'            => array('slug' => 'wc-note'),\n        'capability_type'    => 'post',\n        'has_archive'        => true,\n        'hierarchical'       => false,\n        'menu_position'      => null,\n        'menu_icon'          => 'dashicons-edit',\n        'supports'           => array('title', 'editor', 'custom-fields', 'author', 'thumbnail'),\n        'show_in_rest'       => false,\n    );\n\n    register_post_type('wc_note', $args);\n}\nadd_action('init', 'wc_notes_register_post_type');\n\n/**\n * Flush rewrite rules on activation\n */\nfunction wc_notes_activate() {\n    wc_notes_register_post_type();\n    flush_rewrite_rules();\n}\nregister_activation_hook(__FILE__, 'wc_notes_activate');\n\n/**\n * Flush rewrite rules on deactivation\n */\nfunction wc_notes_deactivate() {\n    flush_rewrite_rules();\n}\nregister_deactivation_hook(__FILE__, 'wc_notes_deactivate');\n"
    },
    {
      "step": "writeFile",
      "path": "/wordpress/wp-content/plugins/wc-notes/languages/wc-notes-el_GR.po",
      "data": "msgid \"\"\nmsgstr \"\"\n\"Project-Id-Version: WordCamp Notes 1.0.0\\n\"\n\"Report-Msgid-Bugs-To: https://github.com/yourusername/wordcamp-athens-2025-workshop\\n\"\n\"POT-Creation-Date: 2025-01-01 12:00+0000\\n\"\n\"PO-Revision-Date: 2025-01-01 12:00+0000\\n\"\n\"Last-Translator: WordCamp Athens 2025\\n\"\n\"Language-Team: Greek\\n\"\n\"Language: el_GR\\n\"\n\"MIME-Version: 1.0\\n\"\n\"Content-Type: text/plain; charset=UTF-8\\n\"\n\"Content-Transfer-Encoding: 8bit\\n\"\n\"Plural-Forms: nplurals=2; plural=(n != 1);\\n\"\n\nmsgid \"WordCamp Notes\"\nmsgstr \"Σημειώσεις WordCamp\"\n\nmsgid \"Note\"\nmsgstr \"Σημείωση\"\n\nmsgid \"Add New\"\nmsgstr \"Προσθήκη Νέας\"\n\nmsgid \"Add New Note\"\nmsgstr \"Προσθήκη Νέας Σημειώσης\"\n\nmsgid \"New Note\"\nmsgstr \"Νέα Σημείωση\"\n\nmsgid \"Edit Note\"\nmsgstr \"Επεξεργασία Σημειώσης\"\n\nmsgid \"View Note\"\nmsgstr \"Προβολή Σημειώσης\"\n\nmsgid \"All Notes\"\nmsgstr \"Όλες οι Σημειώσεις\"\n\nmsgid \"Search Notes\"\nmsgstr \"Αναζήτηση Σημειώσεων\"\n\nmsgid \"No notes found.\"\nmsgstr \"Δεν βρέθηκαν σημειώσεις.\"\n\nmsgid \"No notes found in Trash.\"\nmsgstr \"Δεν βρέθηκαν σημειώσεις στον Κάδο.\"\n"
    },
    {
      "step": "runPHP",
      "code": "<?php\n// Write the compiled .mo file from base64\n$mo_file = '/wordpress/wp-content/plugins/wc-notes/languages/wc-notes-el_GR.mo';\n$mo_base64 = '3hIElQAAAAAMAAAAHAAAAHwAAAARAAAA3AAAAAAAAAAgAQAABwAAACEBAAAMAAAAKQEAAAkAAAA2AQAACQAAAEABAAAIAAAASgEAABgAAABTAQAADwAAAGwBAAAEAAAAfAEAAAwAAACBAQAACQAAAI4BAAAOAAAAmAEAAHUBAACnAQAAGQAAAB0DAAAsAAAANwMAACIAAABkAwAAKQAAAIcDAAAXAAAAsQMAAD8AAADJAwAALQAAAAkEAAAQAAAANwQAACcAAABIBAAAIQAAAHAEAAAdAAAAkgQAAAEAAAACAAAAAAAAAAMAAAAEAAAACQAAAAAAAAAAAAAABwAAAAAAAAAAAAAACAAAAAwAAAAKAAAABgAAAAUAAAALAAAAAEFkZCBOZXcAQWRkIE5ldyBOb3RlAEFsbCBOb3RlcwBFZGl0IE5vdGUATmV3IE5vdGUATm8gbm90ZXMgZm91bmQgaW4gVHJhc2guAE5vIG5vdGVzIGZvdW5kLgBOb3RlAFNlYXJjaCBOb3RlcwBWaWV3IE5vdGUAV29yZENhbXAgTm90ZXMAUHJvamVjdC1JZC1WZXJzaW9uOiBXb3JkQ2FtcCBOb3RlcyAxLjAuMApSZXBvcnQtTXNnaWQtQnVncy1UbzogaHR0cHM6Ly9naXRodWIuY29tL3lvdXJ1c2VybmFtZS93b3JkY2FtcC1hdGhlbnMtMjAyNS13b3Jrc2hvcApQTy1SZXZpc2lvbi1EYXRlOiAyMDI1LTAxLTAxIDEyOjAwKzAwMDAKTGFzdC1UcmFuc2xhdG9yOiBXb3JkQ2FtcCBBdGhlbnMgMjAyNQpMYW5ndWFnZS1UZWFtOiBHcmVlawpMYW5ndWFnZTogZWxfR1IKTUlNRS1WZXJzaW9uOiAxLjAKQ29udGVudC1UeXBlOiB0ZXh0L3BsYWluOyBjaGFyc2V0PVVURi04CkNvbnRlbnQtVHJhbnNmZXItRW5jb2Rpbmc6IDhiaXQKUGx1cmFsLUZvcm1zOiBucGx1cmFscz0yOyBwbHVyYWw9KG4gIT0gMSk7CgDOoM+Bzr/Pg864zq7Ous63IM6dzq3Osc+CAM6gz4HOv8+DzrjOrs66zrcgzp3Orc6xz4IgzqPOt868zrXOuc+Oz4POt8+CAM6MzrvOtc+CIM6/zrkgzqPOt868zrXOuc+Oz4POtc65z4IAzpXPgM61zr7Otc+BzrPOsc+Dzq/OsSDOo863zrzOtc65z47Pg863z4IAzp3Orc6xIM6jzrfOvM61zq/Pic+DzrcAzpTOtc69IM6yz4HOrc64zrfOus6xzr0gz4POt868zrXOuc+Oz4POtc65z4Igz4PPhM6/zr0gzprOrM60zr8uAM6UzrXOvSDOss+Bzq3OuM63zrrOsc69IM+DzrfOvM61zrnPjs+DzrXOuc+CLgDOo863zrzOtc6vz4nPg863AM6Rzr3Osc62zq7PhM63z4POtyDOo863zrzOtc65z47Pg861z4nOvQDOoM+Bzr/Oss6/zrvOriDOo863zrzOtc65z47Pg863z4IAzqPOt868zrXOuc+Oz4POtc65z4IgV29yZENhbXAA';\nfile_put_contents($mo_file, base64_decode($mo_base64));\n"
    },
    {
      "step": "runPHP",
      "code": "<?php\nrequire_once '/wordpress/wp-load.php';\nrequire_once '/wordpress/wp-admin/includes/plugin.php';\nactivate_plugin('wc-notes/plugin.php');\n"
    },
    {
      "step": "runPHP",
      "code": "<?php\nrequire_once '/wordpress/wp-load.php';\n// Force reload of locale settings\n$locale = 'el_GR';\nupdate_option('WPLANG', $locale);\nupdate_option('locale', $locale);\n\n// Set admin user locale\n$admin_user = get_user_by('login', 'admin');\nif ($admin_user) {\n    update_user_meta($admin_user->ID, 'locale', $locale);\n}\n\n// Load the locale\nif (function_exists('switch_to_locale')) {\n    switch_to_locale($locale);\n}\n\n// Try to load WordPress core translations if available\nload_default_textdomain($locale);\n"
    }
  ]
}

